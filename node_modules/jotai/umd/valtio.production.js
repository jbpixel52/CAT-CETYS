!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("valtio/vanilla"),require("jotai")):"function"==typeof define&&define.amd?define(["exports","valtio/vanilla","jotai"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).jotaiValtio={},t.vanilla,t.jotai)}(this,(function(t,n,o){"use strict";var e=function(t){return"object"==typeof t&&null!==t},i=function t(n,o,i){Object.getOwnPropertyNames(o).forEach((function(a){a in i?Object.is(o[a],i[a])||(e(n[a])&&e(o[a])&&e(i[a])?t(n[a],o[a],i[a]):n[a]=i[a]):delete n[a]})),Object.keys(i).forEach((function(t){t in o||(n[t]=i[t])}))};t.atomWithProxy=function(t,e){var a=o.atom(n.snapshot(t));return a.onMount=function(o){var i=function(){o(n.snapshot(t))},a=n.subscribe(t,i,null==e?void 0:e.sync);return i(),a},o.atom((function(t){return t(a)}),(function(o,e,f){var u="function"==typeof f?f(o(a)):f;i(t,n.snapshot(t),u)}))}}));
