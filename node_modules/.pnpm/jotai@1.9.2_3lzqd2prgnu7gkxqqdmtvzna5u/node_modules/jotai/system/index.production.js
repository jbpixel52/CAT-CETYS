System.register(["react"],function(R){"use strict";var Y,Z,z,G,H,x,ee,ne,te;return{setters:[function(m){Y=m.createContext,Z=m.useState,z=m.useEffect,G=m.useRef,H=m.createElement,x=m.useContext,ee=m.useReducer,ne=m.useDebugValue,te=m.useCallback}],execute:function(){R({atom:we,useAtom:he,useAtomValue:ie,useSetAtom:ce});const m=Symbol(),L=c=>!!c[m],O=c=>!c[m].c,_=c=>{var u;const{b:l,c:a}=c[m];a&&(a(),(u=re.get(l))==null||u())},V=(c,u)=>{const l=c[m].o,a=u[m].o;return l===a||c===a||L(l)&&V(l,u)},D=(c,u)=>{const l={b:c,o:u,c:null},a=new Promise(d=>{l.c=()=>{l.c=null,d()},u.finally(l.c)});return a[m]=l,a},de=c=>D(c[m].b,c[m].o),re=new WeakMap,Re=R("SECRET_INTERNAL_registerPromiseAbort",(c,u)=>{re.set(c,u)}),j=c=>"init"in c,I="r",B="w",N="c",U="s",pe="h",oe=c=>{const u=new WeakMap,l=new WeakMap,a=new Map;if(c)for(const[n,e]of c){const r={v:e,r:0,y:!0,d:new Map};u.set(n,r)}const d=new WeakMap,p=(n,e,r)=>{let t=d.get(e);t||(t=new Map,d.set(e,t)),r.then(()=>{t.get(n)===r&&(t.delete(n),t.size||d.delete(e))}),t.set(n,r)},y=n=>{const e=new Set,r=d.get(n);return r&&(d.delete(n),r.forEach((t,s)=>{_(t),e.add(s)})),e},w=new WeakMap,b=n=>{let e=w.get(n);return e||(e=new Map,w.set(n,e)),e},v=(n,e)=>{if(n){const r=b(n);let t=r.get(e);return t||(t=v(n.p,e),t&&"p"in t&&O(t.p)&&(t=void 0),t&&r.set(e,t)),t}return u.get(e)},g=(n,e,r)=>{if(n)b(n).set(e,r);else{const t=u.get(e);u.set(e,r),a.has(e)||a.set(e,t)}},S=(n,e=new Map,r)=>{if(!r)return e;const t=new Map;let s=!1;return r.forEach(o=>{var i;const f=((i=v(n,o))==null?void 0:i.r)||0;t.set(o,f),e.get(o)!==f&&(s=!0)}),e.size===t.size&&!s?e:t},h=(n,e,r,t,s)=>{const o=v(n,e);if(o){if(s&&(!("p"in o)||!V(o.p,s)))return o;"p"in o&&_(o.p)}const i={v:r,r:(o==null?void 0:o.r)||0,y:!0,d:S(n,o==null?void 0:o.d,t)};let f=!(o!=null&&o.y);return!o||!("v"in o)||!Object.is(o.v,r)?(f=!0,++i.r,i.d.has(e)&&(i.d=new Map(i.d).set(e,i.r))):i.d!==o.d&&(i.d.size!==o.d.size||!Array.from(i.d.keys()).every(M=>o.d.has(M)))&&(f=!0,Promise.resolve().then(()=>{T(n)})),o&&!f?o:(g(n,e,i),i)},E=(n,e,r,t,s)=>{const o=v(n,e);if(o){if(s&&(!("p"in o)||!V(o.p,s)))return o;"p"in o&&_(o.p)}const i={e:r,r:((o==null?void 0:o.r)||0)+1,y:!0,d:S(n,o==null?void 0:o.d,t)};return g(n,e,i),i},C=(n,e,r,t)=>{const s=v(n,e);if(s&&"p"in s){if(V(s.p,r)&&!O(s.p))return s.y?s:{...s,y:!0};_(s.p)}p(n,e,r);const o={p:r,r:((s==null?void 0:s.r)||0)+1,y:!0,d:S(n,s==null?void 0:s.d,t)};return g(n,e,o),o},W=(n,e,r,t)=>{if(r instanceof Promise){const s=D(r,r.then(o=>{h(n,e,o,t,s)}).catch(o=>{if(o instanceof Promise)return L(o)?o.then(()=>{P(n,e,!0)}):o;E(n,e,o,t,s)}));return C(n,e,s,t)}return h(n,e,r,t)},Ee=(n,e)=>{const r=v(n,e);if(r){const t={...r,y:!1};g(n,e,t)}},P=(n,e,r)=>{if(!r){const s=v(n,e);if(s){if(s.y&&"p"in s&&!O(s.p))return s;if(s.d.forEach((o,i)=>{if(i!==e)if(!l.has(i))P(n,i);else{const f=v(n,i);f&&!f.y&&P(n,i)}}),Array.from(s.d).every(([o,i])=>{const f=v(n,o);return f&&!("p"in f)&&f.r===i}))return s.y?s:{...s,y:!0}}}const t=new Set;try{const s=e.read(o=>{t.add(o);const i=o===e?v(n,o):P(n,o);if(i){if("e"in i)throw i.e;if("p"in i)throw i.p;return i.v}if(j(o))return o.init;throw new Error("no atom init")});return W(n,e,s,t)}catch(s){if(s instanceof Promise){const o=L(s)&&O(s)?de(s):D(s,s);return C(n,e,o,t)}return E(n,e,s,t)}},me=(n,e)=>P(e,n),ye=(n,e)=>{let r=l.get(e);return r||(r=K(n,e)),r},F=(n,e)=>!e.l.size&&(!e.t.size||e.t.size===1&&e.t.has(n)),ge=(n,e)=>{const r=l.get(e);r&&F(e,r)&&Q(n,e)},J=(n,e)=>{const r=l.get(e);r==null||r.t.forEach(t=>{t!==e&&(Ee(n,t),J(n,t))})},ue=(n,e,r)=>{let t=!0;const s=(f,M)=>{const A=P(n,f);if("e"in A)throw A.e;if("p"in A){if(M!=null&&M.unstable_promise)return A.p.then(()=>{const k=v(n,f);return k&&"p"in k&&k.p===A.p?new Promise(X=>setTimeout(X)).then(()=>s(f,M)):s(f,M)});throw A.p}if("v"in A)return A.v;throw new Error("no value found")},o=(f,M)=>{let A;if(f===e){if(!j(f))throw new Error("atom not writable");y(f).forEach(fe=>{fe!==n&&W(fe,f,M)});const k=v(n,f),X=W(n,f,M);k!==X&&J(n,f)}else A=ue(n,f,M);return t||T(n),A},i=e.write(s,o,r);return t=!1,i},ae=(n,e,r)=>{const t=ue(r,n,e);return T(r),t},Se=n=>!!n.write,K=(n,e,r)=>{const t={t:new Set(r&&[r]),l:new Set};if(l.set(e,t),P(void 0,e).d.forEach((s,o)=>{const i=l.get(o);i?i.t.add(e):o!==e&&K(n,o,e)}),Se(e)&&e.onMount){const s=i=>ae(e,i,n),o=e.onMount(s);n=void 0,o&&(t.u=o)}return t},Q=(n,e)=>{var r;const t=(r=l.get(e))==null?void 0:r.u;t&&t(),l.delete(e);const s=v(n,e);s&&("p"in s&&_(s.p),s.d.forEach((o,i)=>{if(i!==e){const f=l.get(i);f&&(f.t.delete(e),F(i,f)&&Q(n,i))}}))},le=(n,e,r,t)=>{const s=new Set(r.d.keys());t==null||t.forEach((o,i)=>{if(s.has(i)){s.delete(i);return}const f=l.get(i);f&&(f.t.delete(e),F(i,f)&&Q(n,i))}),s.forEach(o=>{const i=l.get(o);i?i.t.add(e):l.has(e)&&K(n,o,e)})},T=n=>{if(n){b(n).forEach((e,r)=>{const t=u.get(r);if(e!==t){const s=l.get(r);s==null||s.l.forEach(o=>o(n))}});return}for(;a.size;){const e=Array.from(a);a.clear(),e.forEach(([r,t])=>{const s=v(void 0,r);if(s&&s.d!==(t==null?void 0:t.d)&&le(void 0,r,s,t==null?void 0:t.d),t&&!t.y&&(s==null?void 0:s.y))return;const o=l.get(r);o==null||o.l.forEach(i=>i())})}},Ae=n=>{b(n).forEach((e,r)=>{const t=u.get(r);(!t||e.r>t.r||e.y!==t.y||e.r===t.r&&e.d!==t.d)&&(u.set(r,e),e.d!==(t==null?void 0:t.d)&&le(n,r,e,t==null?void 0:t.d))})},Me=(n,e)=>{e&&Ae(e),T(void 0)},be=(n,e,r)=>{const t=ye(r,n).l;return t.add(e),()=>{t.delete(e),ge(r,n)}},Pe=(n,e)=>{for(const[r,t]of n)j(r)&&(W(e,r,t),J(e,r));T(e)};return{[I]:me,[B]:ae,[N]:Me,[U]:be,[pe]:Pe}},_e=R("unstable_createStore",c=>{const u=oe(c),l=d=>{const p=u[I](d);if("e"in p)throw p.e;if(!("p"in p))return p.v},a=d=>new Promise((p,y)=>{const w=u[I](d);"e"in w?y(w.e):"p"in w?p(w.p.then(()=>a(d))):p(w.v)});return{get:l,asyncGet:a,set:(d,p)=>u[B](d,p),sub:(d,p)=>u[U](d,p),SECRET_INTERNAL_store:u}}),se=(c,u)=>({s:u?u(c).SECRET_INTERNAL_store:oe(c)}),$=new Map,q=R("SECRET_INTERNAL_getScopeContext",c=>($.has(c)||$.set(c,Y(se())),$.get(c))),Ce=R("Provider",({children:c,initialValues:u,scope:l,unstable_createStore:a,unstable_enableVersionedWrite:d})=>{const[p,y]=Z({});z(()=>{const v=w.current;v.w&&(v.s[N](null,p),delete p.p,v.v=p)},[p]);const w=G();if(!w.current){const v=se(u,a);if(d){let g=0;v.w=S=>{y(h=>{const E=g?h:{p:h};return S(E),E})},v.v=p,v.r=S=>{++g,S(),--g}}w.current=v}const b=q(l);return H(b.Provider,{value:w.current},c)});let ve=0;function we(c,u){const l=`atom${++ve}`,a={toString:()=>l};return typeof c=="function"?a.read=c:(a.init=c,a.read=d=>d(a),a.write=(d,p,y)=>p(a,typeof y=="function"?y(d(a)):y)),u&&(a.write=u),a}function ie(c,u){const l=q(u),a=x(l),{s:d,v:p}=a,y=h=>{const E=d[I](c,h);if("e"in E)throw E.e;if("p"in E)throw E.p;if("v"in E)return E.v;throw new Error("no atom value")},[[w,b,v],g]=ee((h,E)=>{const C=y(E);return Object.is(h[1],C)&&h[2]===c?h:[E,C,c]},p,h=>{const E=y(h);return[h,E,c]});let S=b;return v!==c&&(g(w),S=y(w)),z(()=>{const{v:h}=a;h&&d[N](c,h);const E=d[U](c,g,h);return g(h),E},[d,c,a]),z(()=>{d[N](c,w)}),ne(S),S}function ce(c,u){const l=q(u),{s:a,w:d}=x(l);return te(p=>{const y=w=>a[B](c,p,w);return d?d(y):y()},[a,d,c])}function he(c,u){return"scope"in c&&(console.warn("atom.scope is deprecated. Please do useAtom(atom, scope) instead."),u=c.scope),[ie(c,u),ce(c,u)]}}}});
