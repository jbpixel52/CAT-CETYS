!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("optics-ts"),require("jotai")):"function"==typeof define&&define.amd?define(["exports","optics-ts","jotai"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).jotaiOptics={},e.O,e.jotai)}(this,(function(e,t,n){"use strict";function r(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var i,o=r(t),f=(i=new WeakMap,function(e,t){var n=function(e,t){do{var n=t,r=n[0],i=n.slice(1),o=e.get(r);if(!o)return;if(!i.length)return o[1];e=o[0],t=i}while(t.length)}(i,t);if(n)return n;var r=e();return function(e,t,n){do{var r=t,i=r[0],o=r.slice(1),f=e.get(i);if(f||(f=[new WeakMap],e.set(i,f)),!o.length)return void(f[1]=n);e=f[0],t=o}while(t.length)}(i,t,r),r});var u=function(e,t){return"Traversal"===e._tag?o.collect(e)(t):"Prism"===e._tag?o.preview(e)(t):o.get(e)(t)};e.focusAtom=function(e,t){return f((function(){var r=t(o.optic());return n.atom((function(t){return u(r,t(e))}),(function(t,n,i){var f="function"==typeof i?o.modify(r)(i):o.set(r)(i);return n(e,f(t(e)))}))}),[e,t])}}));
